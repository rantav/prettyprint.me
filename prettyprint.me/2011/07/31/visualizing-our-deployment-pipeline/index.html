<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<title>Visualizing our Deployment Pipeline | PrettyPrint.me</title>
<meta name="generator" content="WordPress 3.2" /> <!-- leave this for stats -->
<link rel="alternate" type="application/rss+xml" title="PrettyPrint.me RSS Feed" href="../../../../feed/index.html" />
<link rel="pingback" href="../../../../xmlrpc.php" />
<link rel="stylesheet" type="text/css" media="all" href="../../../../wp-content/themes/retrospective/style.css" />
<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" media="all" href="http://prettyprint.me/wp-content/themes/retrospective/ie.css" />
<![endif]-->
<!--[if lte IE 6]>
	<link rel="stylesheet" type="text/css" media="all" href="http://prettyprint.me/wp-content/themes/retrospective/ie6.css" />
<![endif]--> 
<meta name="verify-v1" content="iFkC+FAFtOQ601MZ4pU4juKjv2UEYbdQNeezoVgCUyE=" >
<link rel="alternate" type="application/rss+xml" title="PrettyPrint.me &raquo; Visualizing our Deployment Pipeline Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='contact-form-7-css'  href='../../../../wp-content/plugins/contact-form-7/styles747d.css?ver=2.4.5' type='text/css' media='all' />
<script type='text/javascript' src='../../../../wp-includes/js/l10na17a.js?ver=20101110'></script>
<script type='text/javascript' src='../../../../wp-includes/js/jquery/jquery51a2.js?ver=1.6.1'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/google-analyticator/external-tracking.min6fb3.js?ver=6.1.3'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='PrettyPrint.me' href='../../../../index.html' />
<link rel='start' title='Hello Pretty World' href='../../../../2009/05/17/hello-pretty-world/index.html' />
<link rel='prev' title='The Three Axis of Software Management Complexity' href='../../08/the-three-axis-of-software-management-complexity/index.html' />
<meta name="generator" content="WordPress 3.2" />
<link rel='shortlink' href='../../../../indexe145.html?p=409' />

<!-- All in One SEO Pack 1.6.13.3 by Michael Torbert of Semper Fi Web Design[209,253] -->
<meta name="description" content="Cross posted also here: http://techblog.outbrain.com/2011/08/visualizing-our-deployment-pipeline/ When large numbers start piling up, in order to make sense" />
<link rel="canonical" href="index.html" />
<!-- /all in one seo pack -->
<meta name="tweetmeme-title" content="Visualizing our Deployment Pipeline" />
<link rel="stylesheet" href="../../../../wp-content/plugins/wp-syntax/wp-syntax.css" type="text/css" media="screen" />
<!-- Google Analytics Tracking by Google Analyticator 6.1.3: http://ronaldheft.com/code/analyticator/ -->
<script type="text/javascript">
	var analyticsFileTypes = [''];
	var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-2694026-6']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</head>

<body>
<div id="header">
<a href="../../../../index.html" title="PrettyPrint.me">
<div id="logo">
<p>by Ran Tavory</p>
</div>
</a>
<div id="top_navlist">
<ul id="navlist">
<li class="page_item page-item-213"><a href="../../../../about-2/index.html" title="About.me">About.me</a></li>
<li class="page_item page-item-368"><a href="../../../../contact/index.html" title="Contact">Contact</a></li>
</ul>
</div><!--//top_navlist-->
</div><!--//header-->

<div id="container"><!--container -->
<!-- #content -->
<div id="content">

    <div class="post" id="post-409">
      <h1>Visualizing our Deployment Pipeline</h1>
      <p class="postmetadata"> </p>
      
      <div class="entry">
        <div class="tweetmeme_button" style="float: right; margin-left: 10px;"><a class="tm_button" rel="&amp;style=normal&amp;b=2" href="index.html"></a></div>
<div>Cross posted also here: <a href="http://techblog.outbrain.com/2011/08/visualizing-our-deployment-pipeline/">http://techblog.outbrain.com/2011/08/visualizing-our-deployment-pipeline/</a></div>
<div>When large numbers start piling up, in order to make sense of them they need to be visualized.</div>
<div>I still work as a consultant at outbrain about one day a week and most of the time I&#8217;m in charge of the deployment system <a href="../../../01/24/continuous-deployment-at-outbrain/index.html">last described here</a>.</div>
<div>The challenges encountered when developing the system are good challenges, every day we have too many deployments to be easily followed; so I decided to visualize them.</div>
<div>On an average day we usually have  a dozen or two deployment (to production, not including test clusters) so I figured why don&#8217;t I use my <a href="http://code.google.com/apis/chart/">google-visualization</a>-fu and draw some nice graphs. Here are the results and explanations follow.</div>
<div>BTW, before I begin, just to put things in context, outbrain had been practicing  <a href="http://www.startuplessonslearned.com/search/label/continuous%20deployment">Continuous Deployment</a> for a while (6 months or so) and although there are a few systems that helped us get there, one of the main pillars was a relatively new tool written by the fine folks at LinkedIn (and in particular <a href="http://www.linkedin.com/in/pujante">Yan</a>, thanks Yan), so just wanted to give a fair shout out to them and thank Yan for the nice tool, API and ongoing awesome support. If you&#8217;re looking for a deployment tool do give <a href="https://github.com/linkedin/glu/wiki">glu</a> a try, it&#8217;s pretty awesome! Without glu and it&#8217;s API all the nice graphs and the rest of the system would not have seen the light of day.</div>
<p>&nbsp;</p>
<h1>The Annotated Timeline</h1>
<p>This graph may seem intimidating at first, so don&#8217;t be scared and let&#8217;s dive right into it&#8230; BTW, you may click on the image to enlarge it.</p>
<div><a href="../../../../wp-content/uploads/2011/07/versions-1.png"><img class="alignnone size-medium wp-image-430" title="versions-1" src="../../../../wp-content/uploads/2011/07/versions-1-300x152.png" alt="" width="300" height="152" /></a></div>
<div>First, let&#8217;s zoom in to the right hand side of the graph. BTW, this graph uses google&#8217;s <a href="http://code.google.com/apis/chart/interactive/docs/gallery/annotatedtimeline.html">annotated timeline graph</a> which is really cool for showing how things change over time and correlate them to events, which is what I do here &#8211; the events are the deployments and the x axis is the time while the y is the version of the deployed module.</div>
<div><a href="../../../../wp-content/uploads/2011/07/rhs-1.png"><img class="alignnone size-full wp-image-431" title="rhs-1" src="../../../../wp-content/uploads/2011/07/rhs-1.png" alt="" width="310" height="114" /></a></div>
<div>On the right hand side you see a list of deployment events, for example the one at the top has &#8220;ERROR www @tom&#8230;&#8221; and the one next is &#8220;BehavioralEngine @yatirb&#8230;&#8221; etc. This list can be filtered so if you type a name of one of the developers such as @tom or @yatirb you see only the deployments made by him (of course all deployments are made by devs, not by ops, hey, we&#8217;re <a href="http://en.wikipedia.org/wiki/DevOps">devops</a>y, remember?).</div>
<div>If you type into the filter box only www you see all the deployments for the www component, which by no surprise is just our website.</div>
<div>If you type ERROR you see all deployments that had errors (and yes, this happens too, not a big deal)</div>
<div>The nice thing about this graph from is first that while you filter the elements on the graph that are filtered out dissapear, so for example let&#8217;s see only deployments to www (click on the image to enlarge):</div>
<div><a href="../../../../wp-content/uploads/2011/07/www-1.png"><img class="alignnone size-medium wp-image-432" title="www-1" src="../../../../wp-content/uploads/2011/07/www-1-300x150.png" alt="" width="300" height="150" /></a></div>
<div>You&#8217;d notice that not only the right hand side list is shrunk and contains only deployments to www, but also the left hand side graph now only has the appropriate markers. The rest of the lines are still there but only the markers for the www line are on the graph right now.</div>
<div>Now let&#8217;s have a look at the graph. One of the coolest things is that you can zoom in to a specific timespan using the controls at the lower part of the graph. (click to enlarge)</div>
<div><a href="../../../../wp-content/uploads/2011/07/zoom.png"><img class="alignnone size-medium wp-image-418" title="zoom" src="../../../../wp-content/uploads/2011/07/zoom-300x219.png" alt="" width="300" height="219" /></a></div>
<p>In this graph the x axis shows the time (date and time of day) and the y axis shows the svn revision number. Each colored line represents a single module (so we have one line for www and one line for the BehavioralEngine etc).</p>
<p>What you would usually see is for each line (representing a module) a monotonically increasing value over time, a line form the bottom left corner towards the top right corner, however, in relatively rare cases where a developer wants to deploy an older version of his module, then you clearly see it by the line suddenly dropping down a bit instead of climbing up; this is really nice, helps find unusual events.</p>
<p>&nbsp;</p>
<h1>The Histogram</h1>
<p>In the next graph you see an overview of deployments per day. (click to enlarge)</p>
<p><a href="../../../../wp-content/uploads/2011/07/histo.png"><img class="alignnone size-medium wp-image-420" title="histo" src="../../../../wp-content/uploads/2011/07/histo-300x225.png" alt="" width="300" height="225" /></a></p>
<p>This is more of a holistic view of how things went the last couple of days, it just shows how many deployments took place each day (counts production clusters only) and colors the successful ones in green and the failed ones in red.</p>
<p>This graph is like an executive summary that can tell the story of &#8211; in case there are too many reds (or there are reds at all), then someone needs to take that seriously and figure out what needs to be fixed (usually that someone is me&#8230;) &#8211; or in case the bars aren&#8217;t high enough, then someone needs to kick developer&#8217;s buts and get them deployin somethin already&#8230;</p>
<p>Like many other graphs from google&#8217;s library (this one&#8217;s a Stacked <a href="http://code.google.com/apis/chart/interactive/docs/gallery/columnchart.html">Column Chart</a>, BTW), it shows nice tooltips when hovering over any of the columns with their x values (the date) and their y value (number of successful/failed deployments)</p>
<p><a href="../../../../wp-content/uploads/2011/07/hover.png"><img class="alignnone size-full wp-image-422" title="hover" src="../../../../wp-content/uploads/2011/07/hover.png" alt="" width="183" height="208" /></a></p>
<p>&nbsp;</p>
<h1>Versions DNA Mapping</h1>
<p>The following graph shows the current variety of versions that we have in our production systems for each and every module. It was attributed as a DNA mapping by one of our developers b/c of the similarity in how they look but that&#8217;s how far this similarity goes&#8230;</p>
<p><a href="../../../../wp-content/uploads/2011/07/versions.png"><img class="alignnone size-medium wp-image-424" title="versions" src="../../../../wp-content/uploads/2011/07/versions-300x147.png" alt="" width="300" height="147" /></a></p>
<p>The x axis lists the different modules that we have (names were intentionally left out, but you can imaging having www and other folks there). The y axis shows the svn versions of them in production. It uses glu&#8217;s live model as reported by glu&#8217;s agents to zookeeper.</p>
<p>Let&#8217;s zoom in a bit:</p>
<p><a href="../../../../wp-content/uploads/2011/07/versions-zoom.png"><img class="alignnone size-full wp-image-425" title="versions zoom" src="../../../../wp-content/uploads/2011/07/versions-zoom.png" alt="" width="227" height="428" /></a></p>
<p>What this diagram tells us is that the module www has versions starting from 41268 up to 41463 in production. This is normal as we don&#8217;t necessarily deploy everything to all servers at once, but this graph helps us easily find hosts that are left behind for too long, so for example if one of the modules had not been deployed in a while then you&#8217;d see it falling behind low on the graph. Similarly, if a module has a large variability in versions in production, chances are that you want to close that gap pretty soon. The following graph illustrates both cases:</p>
<p><a href="../../../../wp-content/uploads/2011/07/behind.png"><img class="alignnone size-medium wp-image-426" title="behind" src="../../../../wp-content/uploads/2011/07/behind-300x106.png" alt="" width="300" height="106" /></a></p>
<p>To implement this graph I used a crippled version of the <a href="http://code.google.com/apis/chart/interactive/docs/gallery/candlestickchart.html">Candle Stick Chart</a>, which is normally used for showing stock values; it&#8217;s not ideal for this use case but it&#8217;s the closest I could find.</p>
<p>That&#8217;s all, three charts is enough for now and there are other news regarding our evolving deployment system, but they are not as visual; if you have any questions or suggestions for other types of graphs that could be useful don&#8217;t be shy to comment or tweet.</p>
<script type='text/javascript'>
		<!--
		//OBSTART:do_NOT_remove_this_comment
		var OutbrainPermaLink="index.html";
		if(typeof(OB_Script)!='undefined'){OutbrainStart();} else {
		var OB_PlugInVer="7.0.0.0_Regular";;var OB_raterMode="stars";var OB_recMode="rec";var OBITm="1263219542";var OB_Script=true;var OB_langJS="";document.write(unescape("%3Cscript src='http://widgets.outbrain.com/OutbrainRater.js' type='text/javascript'%3E%3C/script%3E"));}
		//OBEND:do_NOT_remove_this_comment
		//-->
		</script>
		      </div>
      <p class="postmetadata2">Published in <a href="../../../../category/uncategorized/index.html" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a><!-- by <php the_author(); ?> -->, July 31st, 2011 <br />
      	</p>
    </div>
    
	<!--
	<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://prettyprint.me/2011/07/31/visualizing-our-deployment-pipeline/"
    dc:identifier="http://prettyprint.me/2011/07/31/visualizing-our-deployment-pipeline/"
    dc:title="Visualizing our Deployment Pipeline"
    trackback:ping="http://prettyprint.me/2011/07/31/visualizing-our-deployment-pipeline/trackback/" />
</rdf:RDF>	-->

  
<!-- You can start editing here. -->

<div class="boxcomments">





	<h2 id="trackbacks">1 Trackback(s)</h2>
	
	<ol class="tblist">
	

	<li id="comment-9387">
		Aug 1, 2011: <a href='http://techblog.outbrain.com/2011/08/visualizing-our-deployment-pipeline/' rel='external nofollow' class='url'>Visualizing our Deployment Pipeline &laquo; Outbrain Techblog</a>			</li>
	
		

	</ol>

	

	<p id="comments-closed">Sorry, comments for this entry are closed at this time.</p>
</div>  
 
 
</div><!-- //content -->

<div id="sidebar"><!-- sidebar -->

<p class="rssfeed"><a class="rsslink" href="../../../../feed/index.html"></a>
<p><a href="http://feeds2.feedburner.com/PrettyPrintMe"><img src="http://feeds2.feedburner.com/~fc/PrettyPrintMe?bg=3069B0&amp;fg=fffdfa&amp;anim=1" height="26" width="88" style="border:0" alt="" /></a></p>
</p>

<h2>Search</h2>
<form method="get" id="searchform" class="search" action="http://prettyprint.me/">
<input type="text" name="s" value="Type keywords and hit enter..." onfocus="if (this.value == 'Type keywords and hit enter...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Type keywords and hit enter...';}" />
</form>

<!--
<h2>Categories</h2>
<ul>
		<li class="cat-item cat-item-1"><a href="http://prettyprint.me/category/uncategorized/" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
</ul>
-->

<h2>Blog Archives</h2>
<ul>
  	<li><a href='../../index.html' title='July 2011'>July 2011</a></li>
	<li><a href='../../../02/index.html' title='February 2011'>February 2011</a></li>
	<li><a href='../../../01/index.html' title='January 2011'>January 2011</a></li>
	<li><a href='../../../../2010/08/index.html' title='August 2010'>August 2010</a></li>
	<li><a href='../../../../2010/05/index.html' title='May 2010'>May 2010</a></li>
	<li><a href='../../../../2010/04/index.html' title='April 2010'>April 2010</a></li>
	<li><a href='../../../../2010/03/index.html' title='March 2010'>March 2010</a></li>
	<li><a href='../../../../2010/02/index.html' title='February 2010'>February 2010</a></li>
	<li><a href='../../../../2010/01/index.html' title='January 2010'>January 2010</a></li>
	<li><a href='../../../../2009/11/index.html' title='November 2009'>November 2009</a></li>
	<li><a href='../../../../2009/10/index.html' title='October 2009'>October 2009</a></li>
	<li><a href='../../../../2009/09/index.html' title='September 2009'>September 2009</a></li>
	<li><a href='../../../../2009/08/index.html' title='August 2009'>August 2009</a></li>
	<li><a href='../../../../2009/06/index.html' title='June 2009'>June 2009</a></li>
	<li><a href='../../../../2009/05/index.html' title='May 2009'>May 2009</a></li>
</ul>

<!--
<h2>Links</h2>
<ul>
  <li><a href="http://wordpress.org/development/">Development Blog</a></li>
<li><a href="http://codex.wordpress.org/">Documentation</a></li>
<li><a href="http://wordpress.org/extend/plugins/">Plugins</a></li>
<li><a href="http://wordpress.org/extend/ideas/">Suggest Ideas</a></li>
<li><a href="http://wordpress.org/support/">Support Forum</a></li>
<li><a href="http://wordpress.org/extend/themes/">Themes</a></li>
<li><a href="http://planet.wordpress.org/">WordPress Planet</a></li>
</ul>
-->

<!--
<h2>Meta</h2>
<ul>
    <li><a href="http://prettyprint.me/wp-login.php">Log in</a></li>
  <li><a href="http://www.wordpress.org/">WordPress</a></li>
    <li><a href="http://validator.w3.org/check?uri=referer">XHTML</a></li>
</ul>
-->

 


</div> <!--//sidebar  -->

</div><!--//container-->

<div id="footer-container">
	
<div id="footer">

<div id="footerleft">
		<h2>About</h2>
  <p>Restrospective focuses on clean typography and modern colors and design.</p>
  </div>

<div id="footermid">
		<h2>Profiles, Links</h2>
	<ul>
  	<li><a href="http://www.linkedin.com/in/rantav">LinkedIn</a></li>
  	<li><a href="http://tavory.com/">Homepage</a></li>
  	<li><a href="http://twitter.com/rantav">Twitter</a></li>
  	<li><a href="http://reversim.com/">(Hebrew podcast I run) רברס עם פלטפורמה</a></li>
  	<li><a href="http://friendfeed.com/rantav">FriendFeed</a></li>
  	<li><a href="http://gbsheli.com/">Google Blog Sheli (my older blog, mostly Hebrew)</a></li>
  	<li><a href="http://www.facebook.com/people/Ran-Tavory/543122173">Facebook</a></li>
  </ul>
  </div>

<div id="footerright">
	<!--
	<h2>Recent Readers</h2>
-->
  <!--	Paste JavaScript from MyBlogLog or other services -->

  </div>

</div><!--//footer-->

<div class="copyright">
	Copyright &copy; <a href="../../../../index.html">PrettyPrint.me</a> &middot; All rights reserved.<br />
	
	Powered by <a href="http://wordpress.org/">WordPress</a> and <a href="http://blogbuildingu.com/retrospective">Retrospective theme</a> &middot; Design & code by <a href="http://blogbuildingu.com/">Hendry Lee</a>.

<script type='text/javascript' src='../../../../wp-content/plugins/contact-form-7/jquery.formd20f.js?ver=2.52'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/contact-form-7/scripts747d.js?ver=2.4.5'></script>
<script src="../../../../wp-content/plugins/tweetmeme/button.js" type="text/javascript"></script></div>

</div><!--//footer-container-->

</body>

<!-- Mirrored from prettyprint.me/2011/07/31/visualizing-our-deployment-pipeline/ by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 28 Dec 2012 23:00:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
