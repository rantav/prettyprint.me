<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<title>Introduction to NOSQL and cassandra, part 2 | PrettyPrint.me</title>
<meta name="generator" content="WordPress 3.2" /> <!-- leave this for stats -->
<link rel="alternate" type="application/rss+xml" title="PrettyPrint.me RSS Feed" href="../../../../feed/index.html" />
<link rel="pingback" href="../../../../xmlrpc.php" />
<link rel="stylesheet" type="text/css" media="all" href="../../../../wp-content/themes/retrospective/style.css" />
<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" media="all" href="http://prettyprint.me/wp-content/themes/retrospective/ie.css" />
<![endif]-->
<!--[if lte IE 6]>
	<link rel="stylesheet" type="text/css" media="all" href="http://prettyprint.me/wp-content/themes/retrospective/ie6.css" />
<![endif]--> 
<meta name="verify-v1" content="iFkC+FAFtOQ601MZ4pU4juKjv2UEYbdQNeezoVgCUyE=" >
<link rel="alternate" type="application/rss+xml" title="PrettyPrint.me &raquo; Introduction to NOSQL and cassandra, part 2 Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='contact-form-7-css'  href='../../../../wp-content/plugins/contact-form-7/styles747d.css?ver=2.4.5' type='text/css' media='all' />
<script type='text/javascript' src='../../../../wp-includes/js/l10na17a.js?ver=20101110'></script>
<script type='text/javascript' src='../../../../wp-includes/js/jquery/jquery51a2.js?ver=1.6.1'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/google-analyticator/external-tracking.min6fb3.js?ver=6.1.3'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='PrettyPrint.me' href='../../../../index.html' />
<link rel='start' title='Hello Pretty World' href='../../../../2009/05/17/hello-pretty-world/index.html' />
<link rel='prev' title='Maven Code Quality Dashboard and TeamCity' href='../../14/maven-code-quality-dashboard-and-teamcity/index.html' />
<link rel='next' title='Running Cassandra as an embedded service' href='../../../02/14/running-cassandra-as-an-embedded-service/index.html' />
<meta name="generator" content="WordPress 3.2" />
<link rel='shortlink' href='../../../../index03e1.html?p=241' />

<!-- All in One SEO Pack 1.6.13.3 by Michael Torbert of Semper Fi Web Design[209,261] -->
<meta name="description" content="In part 1 of this talk I presented few of the theoretical concepts behind nosql and cassandra. In this talk we deep dive into the Cassandra API and" />
<link rel="canonical" href="index.html" />
<!-- /all in one seo pack -->
<meta name="tweetmeme-title" content="Introduction to NOSQL and cassandra, part 2" />
<link rel="stylesheet" href="../../../../wp-content/plugins/wp-syntax/wp-syntax.css" type="text/css" media="screen" />
<!-- Google Analytics Tracking by Google Analyticator 6.1.3: http://ronaldheft.com/code/analyticator/ -->
<script type="text/javascript">
	var analyticsFileTypes = [''];
	var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-2694026-6']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</head>

<body>
<div id="header">
<a href="../../../../index.html" title="PrettyPrint.me">
<div id="logo">
<p>by Ran Tavory</p>
</div>
</a>
<div id="top_navlist">
<ul id="navlist">
<li class="page_item page-item-213"><a href="../../../../about-2/index.html" title="About.me">About.me</a></li>
<li class="page_item page-item-368"><a href="../../../../contact/index.html" title="Contact">Contact</a></li>
</ul>
</div><!--//top_navlist-->
</div><!--//header-->

<div id="container"><!--container -->
<!-- #content -->
<div id="content">

    <div class="post" id="post-241">
      <h1>Introduction to NOSQL and cassandra, part 2</h1>
      <p class="postmetadata"> </p>
      
      <div class="entry">
        <div class="tweetmeme_button" style="float: right; margin-left: 10px;"><a class="tm_button" rel="&amp;style=normal&amp;b=2" href="index.html"></a></div>
<p>In <a href="../../09/introduction-to-nosql-and-cassandra-part-1/index.html">part 1</a> of this talk I presented few of the theoretical  concepts behind nosql and cassandra.</p>
<p>In this talk we deep dive into the Cassandra API and implementation. The video is again in Hebrew, but the slides are multilingual ;-)<br />
<object width="425" height="344"><param name="movie" value="http://www.youtube.com/v/8P_wAe6Xpxw&amp;hl=en_US&amp;fs=1&amp;"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/8P_wAe6Xpxw&amp;hl=en_US&amp;fs=1&amp;" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="344"></embed></object><br />
<iframe src="http://docs.google.com/present/embed?id=ahbp3bktzpkc_145c5gmf2gz" frameborder="0" width="410" height="342"></iframe></p>
<ul>
<li>Started with a short recap of some of RDBMS and SQL properties, such as <a href="http://databases.about.com/od/specificproducts/a/acid.htm">ADIC</a>, why SQL if very programmer friendly, but is also limited in its support for large scale systems.</li>
<li><a href="http://databases.about.com/od/specificproducts/a/acid.htm"></a>Short recap of the <a href="http://www.julianbrowne.com/article/viewer/brewers-cap-theorem">CAP theorem</a></li>
<li><a href="http://www.julianbrowne.com/article/viewer/brewers-cap-theorem"></a>Short recap of what N/R/W are</li>
<li>Cassandra Data Model: Cassandra is a column oriented DB which follows a similar data model to <a href="http://labs.google.com/papers/bigtable.html">Google&#8217;s BigTable</a></li>
<li>Do you know SQL? So you better start forgetting it, Cassandra is a different game.</li>
<li>Vocabulary:
<ul>
<li>Keyspace &#8211; a logical buffer for application data. For example &#8211; Billing keyspace, or statistics keyspace, appX keyspace etc</li>
<li>ColumnFamily &#8211; similar to SQL tables. Aggregates columns and rows</li>
<li>Keys (or Rows). Each set of columns is identified by a key. A key is unique per Column Family</li>
<li>Columns &#8211; the actual values. Columns are represented by triplets &#8211; (name, value, timestamp)</li>
<li>Super-Columns &#8211; Facebook&#8217;s addition to the BigTable model SuperColumns are columns who&#8217;s values is a list of Columns. (but this is not recursive, you can only have one level of super-columns)</li>
</ul>
</li>
<li><a href="http://labs.google.com/papers/bigtable.html"></a>One way to think of cassandra is as a key-value store, but with extra functionality:
<ul>
<li>Each key has multiple values. In Cassandra jargon those are Columns</li>
<li>When reading or writing data it&#8217;s possible to read/write a set of columns for one specific key (row) atomically. This set of columns may either be a specified by the list column names, or by a slice predicate, assuming the columns are sorted in some way (that&#8217;s a configuration parameter)</li>
<li>In a addition, a multi-get operation is supported and a row-range-read operation is supported as well.</li>
<li>Row-range-read operations are supported only of a partitioner is defined which supports that (configuration parameter)</li>
</ul>
</li>
<li><strong>Key concept</strong>: In SQL you add your data first and then retrieve it in ad-hoc manner using select queries and where clauses; In Cassandra you can&#8217;t do that. Data can only be retrieved by it&#8217;s row key, so you have to think about how you&#8217;re going to be reading your data before you insert it. This is a conceptual diff b/w SQL and Cassandra.</li>
<li>I covered the Cassandra API methods:
<ul>
<li>get</li>
<li>get_slice</li>
<li>multiget</li>
<li>multiget_slice</li>
<li>get_count</li>
<li>get_range_slice</li>
<li>insert</li>
<li>batch_insert</li>
<li>delete</li>
<li>(these are the 0.4 api method. In 0.5 it&#8217;s a little different)</li>
</ul>
</li>
<li>Between N/R/W, N is set per keyspace; R is defined per each read operation (get/multiget/etc) and W is defined per write operation (insert/batch_insert/delete)</li>
<li>Applications play with their R/W values to get different effects, for example they use QUORUM to get high consistency levels, or DC_QUORUM for a balance of high consistency and performance, W=0 to have async writes with reduced consistency.</li>
<li>Cassandra defines different sorting orders on it&#8217;s columns. Sort order may be defined at the ColumnFamily level and is used to get a slice of columns, for example, read all columns that start with a&#8230; and end with z&#8230;</li>
<li>There are several out of the box sort types, such as ascii, utf, numeric and date; Applications may also add their own sorters; This is as far as I recall the only place where Cassandra allows external code to be hooked in.</li>
<li>Thrift is a protocol and a library for cross-process communication and is used by Cassandra. You define a thrift interface and then compile it to the language of your choosing &#8211; C++, Java, Python, PHP etc. This makes it very easy for cross-language processes to talk to each other.</li>
<li>Thrift is also very efficient serializing and  deserializing objects and is also space-efficient (much more than Java serialization is).</li>
<li>I did not have enough time to cover the <a href="http://en.wikipedia.org/wiki/Gossip_protocol">Gossip protocol</a> used by Cassandra internally to learn about the health of its hosts.</li>
<li>I also did not have enough time to cover the Repair-on-reads algorithm used by Cassandra to repair data inconsistencies lazily.</li>
<li>I did not have time to talk about <a href="http://en.wikipedia.org/wiki/Consistent_hashing">consistent hashing</a>, which is what cassandra implements internally to reduce overhead of joined or dropped hosts occurrences.</li>
</ul>
<p>So, as you can see, this was an overloaded, 1h+ talk with a lot to grasp. Wish me luck implementing Cassandra into outbrain!</p>
<script type='text/javascript'>
		<!--
		//OBSTART:do_NOT_remove_this_comment
		var OutbrainPermaLink="index.html";
		if(typeof(OB_Script)!='undefined'){OutbrainStart();} else {
		var OB_PlugInVer="7.0.0.0_Regular";;var OB_raterMode="stars";var OB_recMode="rec";var OBITm="1263219542";var OB_Script=true;var OB_langJS="";document.write(unescape("%3Cscript src='http://widgets.outbrain.com/OutbrainRater.js' type='text/javascript'%3E%3C/script%3E"));}
		//OBEND:do_NOT_remove_this_comment
		//-->
		</script>
		      </div>
      <p class="postmetadata2">Published in <a href="../../../../category/uncategorized/index.html" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a><!-- by <php the_author(); ?> -->, January 20th, 2010 <br />
      	</p>
    </div>
    
	<!--
	<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://prettyprint.me/2010/01/20/introduction-to-nosql-and-cassandra-part-2/"
    dc:identifier="http://prettyprint.me/2010/01/20/introduction-to-nosql-and-cassandra-part-2/"
    dc:title="Introduction to NOSQL and cassandra, part 2"
    trackback:ping="http://prettyprint.me/2010/01/20/introduction-to-nosql-and-cassandra-part-2/trackback/" />
</rdf:RDF>	-->

  
<!-- You can start editing here. -->

<div class="boxcomments">




	<h2 id="comments">4 Responses to &#8220;Introduction to NOSQL and cassandra, part 2&#8221;</h2>

	<ol class="commentlist">
	
		
<li class="odd" id="comment-134">

			
        <p>Hi Ran</p>
<p>I got some idea about cassandra after reading the above</p>
<p>We had some requirement like below</p>
<p>  I have a table which has the columns like           Category_name,Section_name,article,is_published_by  with  multiple records in the table. </p>
<p>I want to retrieve a query based on condition like belongs some category_name &#8216;X&#8217; so then all values which belongs to X category will be retrieved along with other 3 columns</p>
<p>For E.g.,</p>
<p>select * from Table where category_name =&#8217;Category1&#8242;;</p>
<p>Here we are using category_name as key and retrieving all the records</p>
<p>Please let me know if it would be possible.</p>
<p>Can you please help me on this and kindly share your views.</p>
        
        <img alt='' src='http://0.gravatar.com/avatar/ada56e7deabed488d3d145ac36ddda1f?s=28&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D28&amp;r=G' class='avatar avatar-28 photo' height='28' width='28' />        
        <p style="margin-bottom:5px;">By <strong>Mehar Chaitanya</strong> on <a href="#comment-134" title="">Jan 29, 2010</a> </p>
        	
        
	</li>
		
		
		
<li class="mycomment" id="comment-136">

			
        <p>Hi Mehar, one of the differences b/w SQL and Column oriented stores such as Cassandra is that you have to think very good when inserting your data, about how you&#8217;re going to retrieve it. Unlike SQL, in cassandra you only have primary keys, no secondary indexes. What you&#8217;re describing cannot simply be achieved in cassandra unless you plan for it ahead of time.<br />
So if, for example, you create a CF Categories which is keyed by &#8220;Category1&#8243; etc and holds the list of all records belonging to Category1 then that would be possible. But the usual case is that this scheme also calls for a lot of data denormalizations and repetition, so there&#8217;s a tradeoff.<br />
You may also be interested in <a href="http://github.com/digg/lazyboy" rel="nofollow">lazyboy</a>, which sort of implements secondary indexes scheme over cassandra.</p>
        
        <img alt='' src='http://0.gravatar.com/avatar/2cdc5c3059c40c76d5ca7bec8d149f9e?s=28&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D28&amp;r=G' class='avatar avatar-28 photo' height='28' width='28' />        
        <p style="margin-bottom:5px;">By <strong>Ran Tavory</strong> on <a href="#comment-136" title="">Jan 29, 2010</a> </p>
        	
        
	</li>
		
		
				
	</ol>
	
	

	<h2 id="trackbacks">2 Trackback(s)</h2>
	
	<ol class="tblist">
	

	<li id="comment-350">
		Mar 3, 2010: <a href='http://status404.wordpress.com/2010/03/03/links-about-apache-cassandra/' rel='external nofollow' class='url'>Links about Apache Cassandra &laquo; Waltersf&#39;s Blog</a>			</li>
	
		

	<li id="comment-6539">
		Mar 12, 2011: <a href='http://ehcache.net/nosql/introduction-to-nosql-and-cassandra-part-2' rel='external nofollow' class='url'>ehcache.net</a>			</li>
	
		

	</ol>

	

	<p id="comments-closed">Sorry, comments for this entry are closed at this time.</p>
</div>  
 
 
</div><!-- //content -->

<div id="sidebar"><!-- sidebar -->

<p class="rssfeed"><a class="rsslink" href="../../../../feed/index.html"></a>
<p><a href="http://feeds2.feedburner.com/PrettyPrintMe"><img src="http://feeds2.feedburner.com/~fc/PrettyPrintMe?bg=3069B0&amp;fg=fffdfa&amp;anim=1" height="26" width="88" style="border:0" alt="" /></a></p>
</p>

<h2>Search</h2>
<form method="get" id="searchform" class="search" action="http://prettyprint.me/">
<input type="text" name="s" value="Type keywords and hit enter..." onfocus="if (this.value == 'Type keywords and hit enter...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Type keywords and hit enter...';}" />
</form>

<!--
<h2>Categories</h2>
<ul>
		<li class="cat-item cat-item-1"><a href="http://prettyprint.me/category/uncategorized/" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
</ul>
-->

<h2>Blog Archives</h2>
<ul>
  	<li><a href='../../../../2011/07/index.html' title='July 2011'>July 2011</a></li>
	<li><a href='../../../../2011/02/index.html' title='February 2011'>February 2011</a></li>
	<li><a href='../../../../2011/01/index.html' title='January 2011'>January 2011</a></li>
	<li><a href='../../../08/index.html' title='August 2010'>August 2010</a></li>
	<li><a href='../../../05/index.html' title='May 2010'>May 2010</a></li>
	<li><a href='../../../04/index.html' title='April 2010'>April 2010</a></li>
	<li><a href='../../../03/index.html' title='March 2010'>March 2010</a></li>
	<li><a href='../../../02/index.html' title='February 2010'>February 2010</a></li>
	<li><a href='../../index.html' title='January 2010'>January 2010</a></li>
	<li><a href='../../../../2009/11/index.html' title='November 2009'>November 2009</a></li>
	<li><a href='../../../../2009/10/index.html' title='October 2009'>October 2009</a></li>
	<li><a href='../../../../2009/09/index.html' title='September 2009'>September 2009</a></li>
	<li><a href='../../../../2009/08/index.html' title='August 2009'>August 2009</a></li>
	<li><a href='../../../../2009/06/index.html' title='June 2009'>June 2009</a></li>
	<li><a href='../../../../2009/05/index.html' title='May 2009'>May 2009</a></li>
</ul>

<!--
<h2>Links</h2>
<ul>
  <li><a href="http://wordpress.org/development/">Development Blog</a></li>
<li><a href="http://codex.wordpress.org/">Documentation</a></li>
<li><a href="http://wordpress.org/extend/plugins/">Plugins</a></li>
<li><a href="http://wordpress.org/extend/ideas/">Suggest Ideas</a></li>
<li><a href="http://wordpress.org/support/">Support Forum</a></li>
<li><a href="http://wordpress.org/extend/themes/">Themes</a></li>
<li><a href="http://planet.wordpress.org/">WordPress Planet</a></li>
</ul>
-->

<!--
<h2>Meta</h2>
<ul>
    <li><a href="http://prettyprint.me/wp-login.php">Log in</a></li>
  <li><a href="http://www.wordpress.org/">WordPress</a></li>
    <li><a href="http://validator.w3.org/check?uri=referer">XHTML</a></li>
</ul>
-->

 


</div> <!--//sidebar  -->

</div><!--//container-->

<div id="footer-container">
	
<div id="footer">

<div id="footerleft">
		<h2>About</h2>
  <p>Restrospective focuses on clean typography and modern colors and design.</p>
  </div>

<div id="footermid">
		<h2>Profiles, Links</h2>
	<ul>
  	<li><a href="http://www.linkedin.com/in/rantav">LinkedIn</a></li>
  	<li><a href="http://tavory.com/">Homepage</a></li>
  	<li><a href="http://twitter.com/rantav">Twitter</a></li>
  	<li><a href="http://reversim.com/">(Hebrew podcast I run) רברס עם פלטפורמה</a></li>
  	<li><a href="http://friendfeed.com/rantav">FriendFeed</a></li>
  	<li><a href="http://gbsheli.com/">Google Blog Sheli (my older blog, mostly Hebrew)</a></li>
  	<li><a href="http://www.facebook.com/people/Ran-Tavory/543122173">Facebook</a></li>
  </ul>
  </div>

<div id="footerright">
	<!--
	<h2>Recent Readers</h2>
-->
  <!--	Paste JavaScript from MyBlogLog or other services -->

  </div>

</div><!--//footer-->

<div class="copyright">
	Copyright &copy; <a href="../../../../index.html">PrettyPrint.me</a> &middot; All rights reserved.<br />
	
	Powered by <a href="http://wordpress.org/">WordPress</a> and <a href="http://blogbuildingu.com/retrospective">Retrospective theme</a> &middot; Design & code by <a href="http://blogbuildingu.com/">Hendry Lee</a>.

<script type='text/javascript' src='../../../../wp-content/plugins/contact-form-7/jquery.formd20f.js?ver=2.52'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/contact-form-7/scripts747d.js?ver=2.4.5'></script>
<script src="../../../../wp-content/plugins/tweetmeme/button.js" type="text/javascript"></script></div>

</div><!--//footer-container-->

</body>

<!-- Mirrored from prettyprint.me/2010/01/20/introduction-to-nosql-and-cassandra-part-2/ by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 28 Dec 2012 23:02:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
